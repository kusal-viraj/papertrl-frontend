<p-dialog position="left" appendTo="body" [(visible)]="showPoLineItems" (onHide)="showPoLineItems = false; closeDrawer.emit()"
          (close)="showPoLineItems = false; closeDrawer.emit()" [resizable]="false" [style]="{width: '50vw', minWidth: '600px'}" closeOnEscape="false"
          [baseZIndex]="90000">
  <ng-template pTemplate="header">
    <h5 class="popup-header-label">Add line items from PO# {{poNumber}} to this Bill</h5>
  </ng-template>
  <p-tabView styleClass="tabview-custom">

    <p-tabPanel *ngIf="poDetail.purchasingAccountDetails.length !== 0">
      <ng-template pTemplate="header">
        <span class="custom-span">Account Cost Distribution</span>
      </ng-template>
      <ng-template pTemplate="content">

        <p-table responsiveLayout="scroll" [value]="poDetail.purchasingAccountDetails" scrollable="true" [(selection)]="selectedPoAccountDetails"
                 styleClass="p-datatable-sm p-datatable-striped detail-table" scrollDirection="both"
                 scrollHeight="200px" [style]="{width:'auto'}">

          <ng-template pTemplate="header">
            <tr>
              <th style="min-width:50px; text-align-last: center"><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
              <th style="min-width:200px" id="accoun">Account Number</th>
              <th style="min-width:200px" id="accname">Account Name</th>
              <th style="min-width:200px"  id="departmentAcc">Department</th>
              <th style="min-width:150px"  id="poAccAmount">Amount</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-i="rowIndex">
            <tr>
              <td  style="width:50px; text-align-last: center">
                <p-tableCheckbox [value]="item"></p-tableCheckbox>
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.accountNumber}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.accountName}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.departmentName}}
              </td>

              <td style="width:150px" class="text-right">
                {{item.amount | number:'1.2-2'}}
              </td>

            </tr>
          </ng-template>
        </p-table>
      </ng-template>
    </p-tabPanel>


    <p-tabPanel *ngIf="poDetail.purchaseOrderDetails.length !== 0">
      <ng-template pTemplate="header">
        <span class="custom-span">Item Cost Distribution</span>
      </ng-template>
      <ng-template pTemplate="content">

        <p-table responsiveLayout="scroll" [value]="poDetail.purchaseOrderDetails" scrollable="true" [(selection)]="selectedPoLineItems"
                 styleClass="p-datatable-sm p-datatable-striped detail-table" scrollDirection="both"
                 scrollHeight="200px" [style]="{width:'auto'}">

          <ng-template pTemplate="header">
            <tr>
              <th style="min-width:50px;
                text-align-last: center"><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
              <th style="min-width:200px" id="itemNumber">Item Number</th>
              <th style="min-width:200px" id="poItemName">Item Name</th>
              <th style="min-width:200px" id="sku">Vendor Part Number</th>
              <th style="min-width:200px" id="poDescription">Description</th>
              <th style="min-width:200px" id="account">Account Number</th>
              <th style="min-width:200px" id="departmentItem">Department</th>
              <th style="min-width:200px" id="uom">UOM</th>
              <th style="min-width:150px" id="qty">Qty</th>
              <th style="min-width:150px" id="price">Price</th>
              <th style="min-width:150px" id="discount">Discount</th>
              <th style="min-width:150px; text-align: right" id="poAmount">Amount</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-i="rowIndex">
            <tr>
              <td style="width:50px; text-align-last: center">
                <p-tableCheckbox [value]="item"></p-tableCheckbox>
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.itemNumber}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.itemName}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.vendorItemNumber}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.description}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.accountNumber}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.departmentName}}
              </td>

              <td style="width:200px" class="text-left break-word">
                {{item.uomName}}
              </td>

              <td style="width:150px" class="text-right" currencyMask [options]="{ prefix: '', thousands: ',',
              decimal: '.' }">
                {{item.qty | number :'1.2-2'}}
              </td>

              <td style="width:150px" class="text-right">
                {{item.unitPrice | number:'1.2-2'}}
              </td>

              <td style="width:150px" class="text-right" currencyMask [options]="{ prefix: '', thousands: ',',
              decimal: '.' }">
                {{item.discountAmount | number :'1.2-2'}}
              </td>

              <td style="width:150px" class="text-right">
                {{item.amount | number:'1.2-2'}}
              </td>

            </tr>
          </ng-template>
        </p-table>
      </ng-template>
    </p-tabPanel>
  </p-tabView>


  <br>
  <p-checkbox *ngIf="fromBillProcess" class="chechkbox-align" [(ngModel)]="!showPoLineItemsByDefault"
              (onChange)="defaultCheckBoxChanged()"
              [binary]="true"></p-checkbox>&nbsp;<span *ngIf="fromBillProcess"
                                                       class="subHeadingColour">Don't show again</span>

  <ng-template pTemplate="footer">
    <button pButton icon="pi pi-times" (click)="showPoLineItems = false; closeDrawer.emit()" label="Close"
            class=" p-button-outlined p-button-sm"></button>
    <p-button icon="pi pi-plus" (click)="addLines(selectedPoAccountDetails, selectedPoLineItems)" label="Add"
              class="button-align"
              styleClass="p-button-sm"></p-button>
  </ng-template>
</p-dialog>
